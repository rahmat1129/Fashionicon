<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seasons Chennai - Order Collection</title> <!-- Title updated -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        :root {
            --primary-color: #e91e63; /* Vibrant Pink */
            --primary-dark: #c2185b;
            --secondary-color: #9c27b0; /* Purple */
            --accent-color: #ff9800; /* Orange */
            --success-color: #4caf50; /* Green */
            --success-light: #e8f5e9;
            --success-border: #a5d6a7;
            --error-color: #d32f2f; /* Red */
            --error-light: #ffcdd2;
            --error-border: #ef9a9a;
            --background-color: #fce4ec; /* Lighter Pink base */
            --text-color: #333;
            --text-light: #666;
            --white-color: #fff;
            --grey-light: #f5f5f5;
            --grey-medium: #e0e0e0;
            --grey-dark: #bdbdbd;
            --footer-icon-color: #e91e63;
            --category-border-color: #f8bbd0; /* Light Pink Border */
            --category-active-border-color: var(--primary-color);
            --category-placeholder-text: #b47ba1; /* Placeholder text color */
            --arrow-bg-color: rgba(255, 255, 255, 0.85);
            --arrow-hover-bg-color: var(--primary-color);
            --arrow-hover-text-color: var(--white-color);
            --whatsapp-button-bg: linear-gradient(45deg, #4caf50, #25d366); /* Green Gradient */
            --whatsapp-button-hover-bg: linear-gradient(45deg, #388e3c, #1ebe5a);
            --add-to-cart-bg: linear-gradient(45deg, var(--secondary-color), #7b1fa2); /* Purple Gradient */
            --add-to-cart-hover-bg: linear-gradient(45deg, #6a1b9a, var(--secondary-color));
            --overlay-bg: rgba(0, 0, 0, 0.7);
            --search-overlay-bg: #ffffff;
            --modal-bg: #ffffff;
            --modal-border-color: var(--primary-color);

            --transition-speed-fast: 0.2s;
            --transition-speed-medium: 0.4s;
            --transition-speed-slow: 0.6s;
            --easing-curve: ease-in-out;
            --bounce-easing: cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* --- Existing Keyframes --- */
        @keyframes shimmer { 0% { background-position: -1000px 0; } 100% { background-position: 1000px 0; } }
        @keyframes subtlePulse { 0%, 100% { transform: scale(1); box-shadow: 0 1px 3px rgba(0,0,0,0.05); } 50% { transform: scale(1.03); box-shadow: 0 3px 6px rgba(233, 30, 99, 0.2); } }
        @keyframes subtleBounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-2px); } }
        @keyframes slideInUp { from { transform: translateY(25px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes slideOutDown { from { transform: translateY(0); opacity: 1; } to { transform: translateY(25px); opacity: 0; } }
        @keyframes fadeInScale { from { opacity: 0; transform: scale(0.92); } to { opacity: 1; transform: scale(1); } }
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes shine { 0% { transform: translateX(-120%) skewX(-20deg); opacity: 0; } 20% { opacity: 0.4; } 40% { transform: translateX(120%) skewX(-20deg); opacity: 0;} 100% { opacity: 0; } }

        /* --- Existing Body, Container, Header Styles --- */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background-color: var(--background-color);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding-bottom: 70px;
            overflow-x: hidden;
        }
         /* Prevent body scroll when modal is open */
         body.modal-open {
             overflow: hidden;
         }

        .container {
            width: 90%;
            max-width: 1300px;
            margin: 0 auto;
            padding: 20px 15px;
            flex-grow: 1;
        }

        .header {
            background: var(--white-color);
            padding: 0;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            flex-wrap: wrap;
            transition: background-color var(--transition-speed-medium) var(--easing-curve);
        }

        /* --- Existing Category Styles --- */
        .category-section {
            order: 1; width: 100%; padding: 8px 5px 8px 5px;
            animation: fadeInScale var(--transition-speed-medium) var(--easing-curve) 0.1s forwards;
            opacity: 0; border-bottom: 1px solid var(--grey-light);
            background-color: #fffafc; display: flex; justify-content: center;
        }
        .category-scroll-area {
            position: relative; width: 100%; max-width: 450px;
            overflow: hidden; padding: 0 30px; margin: 0;
        }
        .category-scroll-wrapper {
            display: flex; flex-wrap: nowrap; gap: 12px;
            padding: 5px 2px; transition: transform 0.4s var(--bounce-easing);
            width: max-content; align-items: center;
        }
        .scroll-arrow {
            position: absolute; top: 50%; transform: translateY(-50%) scale(1);
            background-color: var(--arrow-bg-color); border: none; border-radius: 50%;
            width: 26px; height: 26px; font-size: 0.9rem; color: var(--secondary-color);
            cursor: pointer; z-index: 10; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 1px 4px rgba(0,0,0,0.1);
            transition: all var(--transition-speed-fast) var(--easing-curve);
            visibility: visible; opacity: 1;
        }
        .scroll-arrow:hover {
            background-color: var(--secondary-color); color: var(--white-color);
            transform: translateY(-50%) scale(1.15); box-shadow: 0 3px 8px rgba(156, 39, 176, 0.3);
        }
        .scroll-arrow:active { transform: translateY(-50%) scale(0.9); }
        .scroll-arrow.left-arrow { left: 2px; }
        .scroll-arrow.right-arrow { right: 2px; }
        .scroll-arrow.hidden { visibility: hidden; opacity: 0; transform: translateY(-50%) scale(0.7); pointer-events: none; }
        .category-circle {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            width: 60px; height: auto; flex-shrink: 0; text-decoration: none; color: var(--text-color);
            position: relative; cursor: pointer;
            transition: transform var(--transition-speed-fast) var(--easing-curve), background-color var(--transition-speed-medium);
            border-radius: 8px; padding: 0;
            animation: slideInUp 0.3s var(--easing-curve) forwards;
            animation-delay: var(--animation-delay, 0s); opacity: 0;
        }
        .category-circle:hover { transform: scale(1.1); }
        .category-circle .img-container {
            width: 48px; height: 48px; border-radius: 50%; overflow: hidden;
            background-color: transparent; border: 2px solid var(--category-border-color);
            transition: transform 0.3s var(--easing-curve), box-shadow 0.3s var(--easing-curve), border-color 0.3s var(--easing-curve);
            position: relative; margin-bottom: 4px; display: flex; align-items: center; justify-content: center;
            box-shadow: none;
        }
        .category-circle:hover .img-container { transform: scale(1.05); border-color: var(--secondary-color); }
        .category-circle.active .img-container {
            border-color: var(--category-active-border-color); box-shadow: 0 0 8px rgba(233, 30, 99, 0.4);
            transform: scale(1.1);
        }
        .category-circle.active { background-color: transparent; animation: none; }
        .category-circle.active span.category-text { font-weight: 700; color: var(--primary-color); }
        .category-circle img { width: 100%; height: 100%; object-fit: cover; display: block; border-radius: 50%; }
        .category-circle .shine {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.35) 50%, rgba(255, 255, 255, 0) 100%);
            transform: translateX(-100%) skewX(-20deg); animation: shine 3s infinite 1.5s;
            border-radius: 50%; z-index: 1; pointer-events: none;
        }
        .category-circle span.category-text {
             font-size: 0.65rem; text-align: center; white-space: nowrap;
             overflow: hidden; text-overflow: ellipsis; display: block; width: 100%;
             padding: 0 2px; transition: color var(--transition-speed-fast) var(--easing-curve);
             line-height: 1.3; margin-top: 2px;
         }
         .category-placeholder-text {
             font-size: 1.6rem; font-weight: bold; color: var(--category-placeholder-text);
             text-align: center; line-height: 1; user-select: none;
         }
          .category-circle[data-category="all"] .img-container {
             background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
             border-color: transparent;
          }
           .category-circle[data-category="all"] .img-container i { color: var(--white-color); font-size: 1.5rem; }

        /* --- Existing Product List & Item Styles --- */
        .product-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 25px; padding-top: 20px; }
        .product-item {
            background-color: var(--white-color); border: 1px solid var(--grey-medium); border-radius: 15px;
            overflow: hidden; box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08); display: flex; flex-direction: column;
            opacity: 0; transform: translateY(20px);
            transition: transform var(--transition-speed-medium) var(--bounce-easing), box-shadow var(--transition-speed-medium) var(--easing-curve), opacity var(--transition-speed-medium) var(--easing-curve);
            will-change: transform, box-shadow; border-left: 4px solid var(--primary-color);
        }
        .product-item.is-visible { opacity: 1; transform: translateY(0); animation: fadeInScale 0.5s var(--bounce-easing) backwards; animation-delay: var(--animation-delay, 0s); }
        .product-item:hover { transform: translateY(-10px) scale(1.03); box-shadow: 0 12px 28px rgba(0, 0, 0, 0.12); border-left-color: var(--accent-color); }
        .product-item .image-wrapper { position: relative; overflow: hidden; background-color: var(--grey-light); aspect-ratio: 1 / 1.15; min-height: 180px; }
        .product-item .image-wrapper::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to right, transparent 0%, rgba(255,255,255,0.6) 50%, transparent 100%); animation: shimmer 1.5s infinite; z-index: 1; opacity: 0; transition: opacity var(--transition-speed-fast); }
        .product-item .image-wrapper.loading::before { opacity: 1; }
        .product-item img { width: 100%; height: 100%; display: block; object-fit: cover; aspect-ratio: 1 / 1.15; min-height: 180px; transition: transform var(--transition-speed-slow) var(--easing-curve), opacity 0.5s ease-in-out; opacity: 0; background-color: transparent; position: relative; z-index: 2; }
        .product-item:hover img { transform: scale(1.08); }
        .product-item img.loaded { opacity: 1; }
        .product-image-error { display: flex; flex-direction: column; align-items: center; justify-content: center; aspect-ratio: 1 / 1.15; background-color: var(--grey-light); color: var(--grey-dark); min-height: 180px; text-align: center; font-size: 0.9rem; padding: 10px; position: relative; z-index: 1; }
        .product-image-error i { font-size: 1.8rem; margin-bottom: 8px; }
        .product-item .product-info { padding: 15px 15px 5px 15px; /* Reduced bottom padding */ flex-grow: 1; display: flex; flex-direction: column; background-color: #fff8fa; border-top: 1px solid var(--grey-light);}
        .product-item h3 { font-size: 1.15rem; font-weight: 600; margin: 0 0 8px 0; color: var(--text-color); overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; line-height: 1.4; }
        .product-item p.price { font-size: 1.25rem; color: var(--primary-dark); margin-bottom: 10px; /* Reduced margin */ margin-top: auto; font-weight: 700; }

        /* --- Button Container --- */
        .product-buttons {
            display: flex;
            gap: 10px; /* Space between buttons */
            margin-top: 10px; /* Space above buttons */
            margin-bottom: 15px; /* Space below buttons */
        }

        /* --- Shared Button Styles --- */
        .product-buttons button, .product-buttons a {
            flex-grow: 1; /* Make buttons share space */
            padding: 10px; /* Slightly smaller padding */
            color: var(--white-color);
            text-align: center;
            text-decoration: none;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9rem; /* Smaller font size */
            font-weight: 600;
            transition: all var(--transition-speed-fast) var(--easing-curve);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            white-space: nowrap;
        }
         .product-buttons button i, .product-buttons a i {
             margin-right: 6px;
             font-size: 0.95em; /* Icon size relative to text */
         }
         .product-buttons button:hover, .product-buttons a:hover {
             transform: translateY(-2px) scale(1.02);
             box-shadow: 0 5px 12px rgba(0, 0, 0, 0.3);
         }
          .product-buttons button:active, .product-buttons a:active {
              transform: translateY(-1px) scale(0.98);
              box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
          }

        /* --- Inquiry Button Specific Styles --- */
        .inquiry-button {
            background: var(--whatsapp-button-bg);
            box-shadow: 0 3px 8px rgba(76, 175, 80, 0.3);
        }
        .inquiry-button:hover { background: var(--whatsapp-button-hover-bg); box-shadow: 0 5px 12px rgba(76, 175, 80, 0.4); }
        .inquiry-button:active { box-shadow: 0 2px 5px rgba(76, 175, 80, 0.2); }

        /* --- Add to Cart Button Specific Styles --- */
        .add-to-cart-btn {
             background: var(--add-to-cart-bg);
             box-shadow: 0 3px 8px rgba(156, 39, 176, 0.3);
         }
         .add-to-cart-btn:hover { background: var(--add-to-cart-hover-bg); box-shadow: 0 5px 12px rgba(156, 39, 176, 0.4); }
         .add-to-cart-btn:active { box-shadow: 0 2px 5px rgba(156, 39, 176, 0.2); }

        /* --- Loading Spinner --- */
        .loading-spinner { display: none; justify-content: center; align-items: center; padding: 60px 20px; width: 100%; transition: opacity var(--transition-speed-medium); opacity: 0; }
        .loading-spinner.visible { display: flex; opacity: 1; }
        .loading-spinner i { font-size: 2.8rem; color: var(--accent-color); animation: spin 1.2s linear infinite; }

        /* --- Existing Footer Styles --- */
        .footer-container { position: fixed; bottom: 0; left: 0; width: 100%; background: linear-gradient(to top, var(--white-color), rgba(255, 255, 255, 0.95)); padding: 5px 0; text-align: center; box-shadow: 0 -3px 10px rgba(0, 0, 0, 0.07); z-index: 1000; border-top: 1px solid var(--grey-medium); backdrop-filter: blur(6px); }
        .footer { background-color: transparent; padding: 0; }
        .footer-links { display: flex; justify-content: space-around; align-items: stretch; max-width: 380px; margin: 0 auto; padding: 0 5px; height: 55px; }
        .footer-links a { color: var(--text-light); text-decoration: none; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 0.6rem; transition: color var(--transition-speed-fast) var(--easing-curve), transform var(--transition-speed-fast) var(--easing-curve); padding: 2px 5px; border-radius: 8px; flex-grow: 1; text-align: center; height: 100%; }
        .footer-links a:hover { color: var(--secondary-color); transform: translateY(-2px); }
        .footer-links a.active { color: var(--primary-color); font-weight: 700; }
        .footer-links a i { font-size: 1.3rem; margin-bottom: 1px; }

        /* --- Existing Search Overlay Styles --- */
        .search-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--overlay-bg); z-index: 1050; display: flex;
            align-items: flex-start; justify-content: center; padding-top: 12vh;
            opacity: 0; visibility: hidden;
            transition: opacity var(--transition-speed-medium) var(--easing-curve), visibility var(--transition-speed-medium) var(--easing-curve);
        }
        .search-overlay.visible { opacity: 1; visibility: visible; }
        .search-overlay.visible .search-box { animation: fadeInScale 0.4s var(--bounce-easing) forwards; }
        .search-overlay .search-box {
             background-color: var(--search-overlay-bg); padding: 30px; border-radius: 15px;
             box-shadow: 0 12px 40px rgba(0,0,0,0.25); width: 90%; max-width: 480px;
             position: relative; opacity: 0; transform: scale(0.95);
             border-top: 5px solid var(--primary-color);
         }
        .search-overlay input[type="search"] {
              width: 100%; padding: 16px 22px; font-size: 1.1rem;
              border: 2px solid var(--grey-medium); border-radius: 10px; margin-bottom: 0;
        }
        .search-overlay input[type="search"]:focus {
               outline: none; border-color: var(--secondary-color);
               box-shadow: 0 0 10px rgba(156, 39, 176, 0.3);
        }
        .search-overlay .close-search {
              position: absolute; top: 8px; right: 8px; background: none; border: none;
              font-size: 2rem; color: var(--grey-dark); cursor: pointer; padding: 8px; line-height: 1;
              transition: color var(--transition-speed-fast), transform var(--transition-speed-fast) var(--bounce-easing);
        }
        .search-overlay .close-search:hover { color: var(--primary-dark); transform: rotate(180deg) scale(1.1); }

        /* --- Order Modal Styles --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--overlay-bg); z-index: 1100; /* Higher than search */
            display: flex; align-items: center; justify-content: center;
            opacity: 0; visibility: hidden;
            transition: opacity var(--transition-speed-medium) var(--easing-curve), visibility var(--transition-speed-medium) var(--easing-curve);
        }
         .modal-overlay.visible { opacity: 1; visibility: visible; }
         .modal-overlay.visible .modal-content { animation: fadeInScale 0.4s var(--bounce-easing) forwards; }

        .modal-content {
            background-color: var(--modal-bg); padding: 25px 30px 30px 30px;
            border-radius: 15px; box-shadow: 0 12px 40px rgba(0,0,0,0.3);
            width: 90%; max-width: 500px; position: relative;
            opacity: 0; transform: scale(0.95);
            border-top: 5px solid var(--modal-border-color);
            max-height: 85vh; /* Limit height */
            overflow-y: auto; /* Allow scrolling if content overflows */
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--grey-medium);
        }
        .modal-header h2 {
            margin: 0;
            font-size: 1.4rem;
            color: var(--primary-dark);
        }
        .modal-close-btn {
            background: none; border: none; font-size: 2.2rem; color: var(--grey-dark);
            cursor: pointer; padding: 0; line-height: 1;
            transition: color var(--transition-speed-fast), transform var(--transition-speed-fast) var(--bounce-easing);
        }
        .modal-close-btn:hover { color: var(--primary-dark); transform: rotate(180deg) scale(1.1); }

        .modal-product-info {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            background-color: var(--grey-light);
            padding: 10px;
            border-radius: 8px;
        }
        .modal-product-info img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 4px;
        }
        .modal-product-info div {
            flex-grow: 1;
        }
        .modal-product-info h4 {
            margin: 0 0 3px 0;
            font-size: 1rem;
            color: var(--text-color);
        }
        .modal-product-info p {
            margin: 0;
            font-size: 0.9rem;
            color: var(--primary-dark);
            font-weight: bold;
        }


        .modal-form .form-group { margin-bottom: 15px; }
        .modal-form label {
            display: block; margin-bottom: 5px; font-weight: 600;
            font-size: 0.9rem; color: var(--text-light);
        }
        .modal-form input[type="text"],
        .modal-form input[type="tel"],
        .modal-form input[type="email"],
        .modal-form textarea {
            width: 100%; padding: 12px 15px; font-size: 1rem;
            border: 1px solid var(--grey-medium); border-radius: 8px;
            transition: border-color var(--transition-speed-fast), box-shadow var(--transition-speed-fast);
        }
         .modal-form input:focus, .modal-form textarea:focus {
             outline: none; border-color: var(--secondary-color);
             box-shadow: 0 0 8px rgba(156, 39, 176, 0.2);
         }
         .modal-form textarea {
             resize: vertical;
             min-height: 80px;
         }
         .modal-form button[type="submit"] {
             display: block; width: 100%; padding: 14px; margin-top: 20px;
             background: var(--primary-color); color: var(--white-color);
             border: none; border-radius: 8px; font-size: 1.1rem; font-weight: 600;
             cursor: pointer; transition: background-color var(--transition-speed-fast), transform var(--transition-speed-fast);
             box-shadow: 0 4px 10px rgba(233, 30, 99, 0.3);
         }
         .modal-form button[type="submit"]:hover {
             background-color: var(--primary-dark);
             transform: translateY(-2px);
         }
         .modal-form button[type="submit"]:disabled {
             background-color: var(--grey-medium);
             cursor: not-allowed;
             box-shadow: none;
             transform: none;
         }
         .modal-form button[type="submit"] i { /* Spinner icon */
             margin-right: 8px;
             display: none; /* Hidden by default */
             animation: spin 1s linear infinite;
         }
         .modal-form button[type="submit"].loading i {
             display: inline-block; /* Show spinner when loading */
         }
         .modal-form button[type="submit"].loading span {
             margin-left: 5px;
         }

         /* --- Modal Feedback Area --- */
        .modal-feedback {
            margin-top: 15px; padding: 12px 15px; border-radius: 8px;
            font-size: 0.95rem; text-align: center; display: none; /* Hidden by default */
            animation: fadeInScale 0.3s forwards;
        }
        .modal-feedback.success {
            background-color: var(--success-light); color: var(--success-color);
            border: 1px solid var(--success-border);
        }
        .modal-feedback.error {
            background-color: var(--error-light); color: var(--error-color);
            border: 1px solid var(--error-border);
        }


        /* --- Existing Responsive Styles --- */
        @media (max-width: 768px) {
            body { padding-bottom: 60px; }
            .container { width: 95%; padding: 15px 10px; }
            .category-section { padding: 6px 5px 6px 5px; }
            .category-scroll-area { padding: 0 30px; max-width: none; }
            .scroll-arrow { width: 24px; height: 24px; font-size: 0.8rem;}
            .scroll-arrow.left-arrow { left: 3px; }
            .scroll-arrow.right-arrow { right: 3px; }
            .category-scroll-wrapper { gap: 10px; }
            .category-circle { width: 55px; }
            .category-circle .img-container { width: 44px; height: 44px; border-width: 2px;}
            .category-circle span.category-text { font-size: 0.6rem; margin-top: 1px;}
            .category-placeholder-text { font-size: 1.4rem; }
            .category-circle[data-category="all"] .img-container i { font-size: 1.3rem; }

            .product-list { grid-template-columns: repeat(auto-fit, minmax(145px, 1fr)); gap: 15px; padding-top: 15px; }
            .product-item { border-radius: 10px; border-left-width: 3px;}
            .product-item .image-wrapper, .product-item img, .product-image-error { min-height: 140px; }
            .product-item h3 { font-size: 0.9rem; line-height: 1.3; }
            .product-item p.price { font-size: 1rem; }
            /* Adjust buttons for mobile */
            .product-buttons { flex-direction: column; /* Stack buttons */ }
            .product-buttons button, .product-buttons a { font-size: 0.8rem; padding: 9px; }

            .footer-container { padding: 4px 0; }
            .footer-links { height: 50px;}
            .footer-links a { font-size: 0.55rem; padding: 3px 4px;}
            .footer-links a i { font-size: 1.2rem; margin-bottom: 1px; }

            .search-overlay { padding-top: 8vh; }
            .search-overlay .search-box { width: 95%; padding: 20px; border-top-width: 4px;}
            .search-overlay input[type="search"] { padding: 12px 15px; font-size: 1rem;}
            .search-overlay .close-search { font-size: 1.8rem; top: 6px; right: 6px; }

             /* Modal on mobile */
             .modal-content { padding: 20px; max-height: 90vh; }
             .modal-header h2 { font-size: 1.2rem; }
             .modal-close-btn { font-size: 2rem; }
             .modal-form input[type="text"],
             .modal-form input[type="tel"],
             .modal-form input[type="email"],
             .modal-form textarea { padding: 10px 12px; font-size: 0.95rem; }
             .modal-form button[type="submit"] { padding: 12px; font-size: 1rem; }
        }

        /* --- Existing Error Message Style --- */
        .error-message { color: var(--error-color); text-align: center; padding: 25px 15px; font-weight: 500; background-color: var(--error-light); border: 1px solid var(--error-border); border-radius: 10px; width: 100%; margin-top: 20px; animation: slideInUp var(--transition-speed-medium) var(--easing-curve) forwards; opacity: 0; box-shadow: 0 4px 10px rgba(211, 47, 47, 0.15); }
        .error-message small { display: block; margin-top: 8px; font-size: 0.75em; color: var(--error-color); opacity: 0.85; }

    </style>
</head>

<body>
    <header class="header">
        <div class="category-section">
            <div class="category-scroll-area">
                <button class="scroll-arrow left-arrow hidden" aria-label="Scroll Left" aria-hidden="true"><i class="fas fa-chevron-left"></i></button>
                <div class="category-scroll-wrapper"></div>
                <button class="scroll-arrow right-arrow hidden" aria-label="Scroll Right" aria-hidden="true"><i class="fas fa-chevron-right"></i></button>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="product-list"></div>
        <div class="loading-spinner"><i class="fas fa-spinner"></i></div>
    </main>

    <div class="footer-container">
        <footer class="footer">
            <div class="footer-links">
                <a href="#" class="active"><i class="fas fa-home"></i><span>Home</span></a>
                <a href="#" id="footer-search-trigger"><i class="fas fa-search"></i><span>Search</span></a>
                <a href="#"><i class="fas fa-store"></i><span>Shop</span></a>
                <a href="#"><i class="fas fa-user"></i><span>Account</span></a>
            </div>
        </footer>
    </div>

    <div class="search-overlay" id="search-overlay">
        <div class="search-box">
            <button class="close-search" id="close-search-btn" aria-label="Close Search">×</button>
            <input type="search" id="search-overlay-input" placeholder="Type to search products..." autocomplete="off">
        </div>
    </div>

    <!-- Order Modal -->
    <div class="modal-overlay" id="order-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Place Your Order</h2>
                <button class="modal-close-btn" id="modal-close-btn" aria-label="Close Order Form">×</button>
            </div>

            <div class="modal-product-info" id="modal-product-info">
                <img id="modal-product-image" src="" alt="Product Image">
                <div>
                    <h4 id="modal-product-name">Product Name</h4>
                    <p id="modal-product-price">₹0.00</p>
                </div>
            </div>

            <form id="order-form" class="modal-form">
                <!-- Hidden fields to store product data -->
                <input type="hidden" id="modal-product-id" name="productId">
                <input type="hidden" id="modal-hidden-product-name" name="productName">
                <input type="hidden" id="modal-hidden-product-price" name="productPrice">
                <input type="hidden" id="modal-hidden-product-imageUrl" name="productImageUrl">

                <div class="form-group">
                    <label for="customer-name">Full Name</label>
                    <input type="text" id="customer-name" name="customerName" required>
                </div>
                <div class="form-group">
                    <label for="customer-phone">Phone Number</label>
                    <input type="tel" id="customer-phone" name="customerPhone" required>
                </div>
                 <div class="form-group">
                    <label for="customer-email">Email (Optional)</label>
                    <input type="email" id="customer-email" name="customerEmail">
                </div>
                <div class="form-group">
                    <label for="delivery-address">Delivery Address</label>
                    <textarea id="delivery-address" name="deliveryAddress" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label for="delivery-city">City</label>
                    <input type="text" id="delivery-city" name="deliveryCity" required>
                </div>
                 <div class="form-group">
                    <label for="delivery-pincode">Pincode</label>
                    <input type="text" id="delivery-pincode" name="deliveryPincode" inputmode="numeric" pattern="[0-9]{6}" required>
                </div>
                 <div class="form-group">
                    <label for="delivery-state">State</label>
                    <input type="text" id="delivery-state" name="deliveryState" required>
                </div>

                <button type="submit" id="submit-order-btn">
                    <i class="fas fa-spinner"></i> <!-- Initially hidden spinner -->
                    <span>Place Order</span>
                </button>
            </form>
            <div id="modal-feedback" class="modal-feedback"></div> <!-- For success/error messages -->
        </div>
    </div>

    <script>
        // --- Existing Constants ---
        const WHATSAPP_NUMBER = "+916201990970";
        const PRODUCTS_URL = "https://rahmat1129.github.io/edu/productdata.json";
        const CATEGORIES_PER_PAGE = 5;
        const DEBOUNCE_DELAY = 300;

        // --- GitHub API Configuration (VERY IMPORTANT SECURITY WARNING) ---
        // !! WARNING !! DO NOT EXPOSE YOUR REAL TOKEN IN CLIENT-SIDE CODE FOR PRODUCTION !!
        // This is ONLY for demonstration based on your specific request.
        // Use a backend proxy or serverless function for a secure solution.
        // Replace placeholders with your actual details.
        const GITHUB_CONFIG = {
            owner: 'rahmat1129', // Your GitHub username
            repo: 'edu', // Your repository name
            filePath: 'ordegggggggvgvvvrdata.json', // Path to your orders file
             // !! REPLACE WITH YOUR ACTUAL GITHUB PERSONAL ACCESS TOKEN (PAT) !!
             // Create a PAT with 'repo' scope: https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens
            token: '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' // <--- PASTE YOUR TOKEN HERE (HIGHLY INSECURE)
        };
        // Check if token is still placeholder
        if (GITHUB_CONFIG.token === 'YOUR_GITHUB_PERSONAL_ACCESS_TOKEN') {
             console.error("GitHub Token is not set! Please replace 'YOUR_GITHUB_PERSONAL_ACCESS_TOKEN' in the GITHUB_CONFIG object.");
             // Optionally disable order placement if token is missing
             // GITHUB_CONFIG.token = null;
        }

        // --- Global Variables ---
        let allProductsData = [];
        let currentStartIndex = 0;
        let totalCategories = 0;
        let categoryItemWidth = 0;
        let resizeTimeout;
        let productAnimationDelay = 0;
        let categoryAnimationDelay = 0;
        let intersectionObserver;

        // --- DOM Element References ---
        const categoryScrollWrapper = document.querySelector('.category-scroll-wrapper');
        const leftArrow = document.querySelector('.left-arrow');
        const rightArrow = document.querySelector('.right-arrow');
        const productListContainer = document.querySelector('.product-list');
        const loadingSpinner = document.querySelector('.loading-spinner');
        const footerSearchTrigger = document.getElementById('footer-search-trigger');
        const searchOverlay = document.getElementById('search-overlay');
        const searchOverlayInput = document.getElementById('search-overlay-input');
        const closeSearchBtn = document.getElementById('close-search-btn');
        // Order Modal Elements
        const orderModal = document.getElementById('order-modal');
        const orderForm = document.getElementById('order-form');
        const modalCloseBtn = document.getElementById('modal-close-btn');
        const submitOrderBtn = document.getElementById('submit-order-btn');
        const modalFeedback = document.getElementById('modal-feedback');
        const modalProductInfo = document.getElementById('modal-product-info');
        const modalProductName = document.getElementById('modal-product-name');
        const modalProductPrice = document.getElementById('modal-product-price');
        const modalProductImage = document.getElementById('modal-product-image');
        // Hidden fields in modal
        const modalProductId = document.getElementById('modal-product-id');
        const modalHiddenProductName = document.getElementById('modal-hidden-product-name');
        const modalHiddenProductPrice = document.getElementById('modal-hidden-product-price');
        const modalHiddenProductImageUrl = document.getElementById('modal-hidden-product-imageUrl');


        // --- Helper Functions ---
        function debounce(func, delay) { /* ... (no changes) ... */
            let timeoutId;
            return function(...args) {
                clearTimeout(timeoutId);
                timeoutId = setTimeout(() => { func.apply(this, args); }, delay);
            };
        }

        function formatCategoryName(category) { /* ... (no changes) ... */
            if (!category) return 'Category';
            return category.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
        }

        // --- UI Creation Functions ---
        function createCategoryCircleElement(category, isAllCategory = false) { /* ... (no changes) ... */
            const categoryCircle = document.createElement('a');
            categoryCircle.href = '#';
            categoryCircle.classList.add('category-circle');
            categoryCircle.dataset.category = category;
            categoryCircle.style.setProperty('--animation-delay', `${categoryAnimationDelay}s`);
            categoryAnimationDelay += 0.03; // Slightly faster stagger

            const imgContainer = document.createElement('div');
            imgContainer.classList.add('img-container');
            const text = document.createElement('span');
            text.classList.add('category-text');

            if (isAllCategory) {
                 text.textContent = 'All';
                 const icon = document.createElement('i');
                 icon.className = 'fas fa-tags'; // Different 'All' icon
                 imgContainer.appendChild(icon);
                 categoryCircle.dataset.category = 'all';
            } else {
                text.textContent = formatCategoryName(category);
                const img = document.createElement('img');
                const firstProductOfCategory = allProductsData.find(p => p.category === category);
                img.src = firstProductOfCategory?.imageUrl || '';
                img.alt = formatCategoryName(category);
                img.loading = 'lazy';
                img.onerror = () => {
                    img.remove();
                    const placeholder = document.createElement('span');
                    placeholder.classList.add('category-placeholder-text');
                    placeholder.textContent = category.substring(0, 1).toUpperCase();
                    imgContainer.appendChild(placeholder);
                };
                img.onload = () => { /* Can add loaded class if needed */ };
                const shine = document.createElement('span');
                shine.classList.add('shine');
                imgContainer.appendChild(img);
                imgContainer.appendChild(shine);
            }
            categoryCircle.appendChild(imgContainer);
            categoryCircle.appendChild(text);
            categoryCircle.addEventListener('click', handleCategoryClick);
            return categoryCircle;
        }

        function createProductItem(product) {
            const productItem = document.createElement('div');
            productItem.classList.add('product-item');
            productItem.dataset.category = product.category;
            productItem.style.setProperty('--animation-delay', `${productAnimationDelay}s`);
            productAnimationDelay += 0.04;

            const imageWrapper = document.createElement('div');
            imageWrapper.classList.add('image-wrapper', 'loading');
            const img = document.createElement('img');
            img.src = product.imageUrl; img.alt = product.name; img.loading = 'lazy';
            img.onload = () => { img.classList.add('loaded'); imageWrapper.classList.remove('loading'); };
            img.onerror = () => {
                console.warn(`Product image failed: ${product.imageUrl}`);
                imageWrapper.classList.remove('loading'); imageWrapper.innerHTML = '';
                const errorDiv = document.createElement('div'); errorDiv.classList.add('product-image-error');
                errorDiv.innerHTML = '<i class="fas fa-camera"></i> Unavailable';
                imageWrapper.appendChild(errorDiv);
            };
            imageWrapper.appendChild(img); productItem.appendChild(imageWrapper);

            const productInfo = document.createElement('div');
            productInfo.classList.add('product-info'); productItem.appendChild(productInfo);
            const title = document.createElement('h3'); title.textContent = product.name; productInfo.appendChild(title);
            const pricePara = document.createElement('p'); pricePara.classList.add('price');
            pricePara.textContent = typeof product.price === 'number' ? `₹${product.price.toFixed(2)}` : (product.price || 'Quote');
            productInfo.appendChild(pricePara);

            // --- Add Button Container ---
            const buttonContainer = document.createElement('div');
            buttonContainer.classList.add('product-buttons');
            productItem.appendChild(buttonContainer); // Append container to item

            // --- Add "Add to Cart" Button ---
            const addToCartButton = document.createElement('button');
            addToCartButton.classList.add('add-to-cart-btn');
            addToCartButton.dataset.productId = product.id; // Store product ID
            addToCartButton.innerHTML = `<i class="fas fa-cart-plus"></i> Order`;
            addToCartButton.addEventListener('click', () => openOrderModal(product.id));
            buttonContainer.appendChild(addToCartButton);

            // --- Add WhatsApp Inquiry Link ---
            const whatsappLink = document.createElement('a'); whatsappLink.classList.add('inquiry-button');
            const whatsappMessage = `Inquiry for: ${product.name} ${product.imageUrl ? `- ${product.imageUrl}` : ''}`;
            whatsappLink.href = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(whatsappMessage)}`;
            whatsappLink.target = "_blank";
            whatsappLink.innerHTML = `<i class="fab fa-whatsapp"></i> Inquiry`;
            buttonContainer.appendChild(whatsappLink);

            return productItem;
        }

        // --- Data Fetching and Display ---
        async function fetchProducts() { /* ... (no changes, includes debug logs and cache reload attempt) ... */
             loadingSpinner.classList.add('visible'); productListContainer.innerHTML = '';
             productAnimationDelay = 0; categoryAnimationDelay = 0;
             try {
                 const response = await fetch(PRODUCTS_URL, { cache: 'reload' }); // Try forcing reload

                 if (!response.ok) { throw new Error(`HTTP ${response.status}: ${response.statusText}`); }

                 const data = await response.json();
                 console.log("Fetched Data:", data); // DEBUG

                 if (!Array.isArray(data)) { throw new Error("Invalid data format: Expected an array."); }

                 allProductsData = data.map(item => ({
                     id: item.id,
                     name: item.name || 'Product',
                     imageUrl: item.imageUrl,
                     price: item.price,
                     category: item.category || 'other',
                     description: item.description || ''
                  }));

                 console.log("Processed Products:", allProductsData); // DEBUG

                 if (allProductsData.length === 0) {
                     productListContainer.innerHTML = `<div class="error-message">No products available.</div>`;
                     document.querySelector('.category-section').style.display = 'none';
                 } else {
                     document.querySelector('.category-section').style.display = 'flex';
                     updateCategoryUI();
                     displayProducts(); // Display all by default initially
                     handleInitialCategory();
                 }
             } catch (error) {
                 console.error("Fetch error:", error);
                 productListContainer.innerHTML = `<div class="error-message">Load failed.<br><small>${error.message}</small></div>`;
                 leftArrow.classList.add('hidden'); rightArrow.classList.add('hidden');
                 document.querySelector('.category-section').style.display = 'none';
             } finally {
                 loadingSpinner.classList.remove('visible');
             }
         }

        function displayProducts(filterCategory = null, searchQuery = "") { /* ... (no changes) ... */
             productListContainer.innerHTML = ''; loadingSpinner.classList.remove('visible');
             productAnimationDelay = 0; // Reset animation delay

             const searchLower = searchQuery.toLowerCase();
             const filteredProducts = allProductsData.filter(product => {
                 const matchesCategory = !filterCategory || (product.category && product.category.toLowerCase() === filterCategory.toLowerCase());
                 const matchesSearch = searchLower === "" || (product.name && product.name.toLowerCase().includes(searchLower)) || (product.description && product.description.toLowerCase().includes(searchLower));
                 return matchesCategory && matchesSearch;
             });

             console.log(`Displaying ${filteredProducts.length} products. Filter: ${filterCategory || 'None'}, Search: "${searchQuery}"`); // DEBUG

              if (filteredProducts.length === 0) {
                  productListContainer.innerHTML = `<div class="error-message">No matching products found.</div>`;
              } else {
                  const fragment = document.createDocumentFragment();
                  filteredProducts.forEach(product => { fragment.appendChild(createProductItem(product)); });
                  productListContainer.appendChild(fragment);
                  setupIntersectionObserver(); // Setup observer for new items
              }
         }

        // --- Category UI and Scroll ---
        function updateCategoryUI() { /* ... (no changes) ... */
              const uniqueCategories = [...new Set(allProductsData.map(p => p.category))].sort();
              totalCategories = uniqueCategories.length; categoryScrollWrapper.innerHTML = '';
              categoryAnimationDelay = 0;

              if (totalCategories === 0) { leftArrow.classList.add('hidden'); rightArrow.classList.add('hidden'); return; }
              const allCircle = createCategoryCircleElement('all', true); categoryScrollWrapper.appendChild(allCircle);
              uniqueCategories.forEach(category => { categoryScrollWrapper.appendChild(createCategoryCircleElement(category)); });
              requestAnimationFrame(calculateCategoryWidthAndScroll);
        }
        function calculateCategoryWidthAndScroll() { /* ... (no changes) ... */
              const firstActualCircle = categoryScrollWrapper.querySelector('.category-circle:not([data-category="all"])');
              const circleToMeasure = firstActualCircle || categoryScrollWrapper.querySelector('.category-circle');
              if (circleToMeasure) {
                   const gap = parseFloat(window.getComputedStyle(categoryScrollWrapper).gap) || 12; // Match CSS gap
                   categoryItemWidth = circleToMeasure.offsetWidth + gap;
              } else { categoryItemWidth = 67; } // Fallback: 55 width + 12 gap
              currentStartIndex = 0; categoryScrollWrapper.style.transform = 'translateX(0px)'; updateArrowVisibility();
        }
        function updateArrowVisibility() { /* ... (no changes) ... */
              const totalItemsInScroll = totalCategories + 1;
              leftArrow.classList.toggle('hidden', currentStartIndex === 0); leftArrow.setAttribute('aria-hidden', currentStartIndex === 0);
              const lastVisibleIndex = currentStartIndex + CATEGORIES_PER_PAGE -1;
              const isAtEnd = lastVisibleIndex >= totalItemsInScroll - 1;
              rightArrow.classList.toggle('hidden', totalItemsInScroll <= CATEGORIES_PER_PAGE || isAtEnd); rightArrow.setAttribute('aria-hidden', totalItemsInScroll <= CATEGORIES_PER_PAGE || isAtEnd);
        }
        function scrollCategories(direction) { /* ... (no changes) ... */
              const totalItemsInScroll = totalCategories + 1; const maxStartIndex = Math.max(0, totalItemsInScroll - CATEGORIES_PER_PAGE);
              if (direction === 'right') { currentStartIndex = Math.min(currentStartIndex + CATEGORIES_PER_PAGE, maxStartIndex); }
              else if (direction === 'left') { currentStartIndex = Math.max(0, currentStartIndex - CATEGORIES_PER_PAGE); }
              const scrollAmount = currentStartIndex * categoryItemWidth; categoryScrollWrapper.style.transform = `translateX(-${scrollAmount}px)`; updateArrowVisibility();
        }

        // --- Event Handlers ---
        function handleCategoryClick(e) { /* ... (no changes) ... */
             e.preventDefault(); const clickedCircle = e.currentTarget; const category = clickedCircle.dataset.category;
             searchOverlayInput.value = ''; closeSearchOverlay();
             displayProducts(category === 'all' ? null : category);
             document.querySelectorAll('.category-circle').forEach(c => c.classList.remove('active'));
             clickedCircle.classList.add('active'); updateUrlCategory(category === 'all' ? null : category);
        }
        function handleInitialCategory() { /* ... (no changes) ... */
             const urlParams = new URLSearchParams(window.location.search); const category = urlParams.get('category');
             const categoryToSelect = category || 'all';
             document.querySelectorAll('.category-circle').forEach(c => c.classList.remove('active'));
             const targetCircle = document.querySelector(`.category-circle[data-category="${categoryToSelect}"]`);
             if (targetCircle) targetCircle.classList.add('active');
             displayProducts(category, searchOverlayInput.value.trim());
        }
        const handleResize = debounce(() => { /* ... (no changes) ... */
             if (allProductsData.length > 0) { calculateCategoryWidthAndScroll(); } }, DEBOUNCE_DELAY);


        // --- Search Overlay Functions ---
        function openSearchOverlay() { /* ... (no changes) ... */
             searchOverlay.classList.add('visible'); searchOverlayInput.focus(); document.body.classList.add('modal-open'); }
        function closeSearchOverlay() { /* ... (no changes) ... */
             searchOverlay.classList.remove('visible'); document.body.classList.remove('modal-open'); }
        function getActiveCategory() { /* ... (no changes) ... */
             const active = document.querySelector('.category-circle.active'); return active && active.dataset.category !== 'all' ? active.dataset.category : null; }


        // --- Order Modal Functions ---
        function openOrderModal(productId) {
            const product = allProductsData.find(p => p.id == productId); // Use == for potential type difference
            if (!product) {
                console.error("Product not found for ID:", productId);
                alert("Could not find product details. Please try again.");
                return;
            }

            // Populate modal display
            modalProductName.textContent = product.name;
            modalProductPrice.textContent = typeof product.price === 'number' ? `₹${product.price.toFixed(2)}` : (product.price || 'Quote');
            modalProductImage.src = product.imageUrl || ''; // Handle missing image
            modalProductImage.alt = product.name;

            // Populate hidden form fields
            modalProductId.value = product.id;
            modalHiddenProductName.value = product.name;
            modalHiddenProductPrice.value = product.price;
            modalHiddenProductImageUrl.value = product.imageUrl || '';

            // Reset form and feedback
            orderForm.reset();
            modalFeedback.style.display = 'none';
            modalFeedback.className = 'modal-feedback'; // Reset classes
            submitOrderBtn.disabled = false;
            submitOrderBtn.classList.remove('loading');

            // Show modal
            orderModal.classList.add('visible');
            document.body.classList.add('modal-open'); // Prevent body scroll
        }

        function closeOrderModal() {
            orderModal.classList.remove('visible');
            document.body.classList.remove('modal-open'); // Allow body scroll
        }

        async function handleOrderSubmit(event) {
            event.preventDefault(); // Prevent default page reload

            if (!GITHUB_CONFIG.token || GITHUB_CONFIG.token === 'YOUR_GITHUB_PERSONAL_ACCESS_TOKEN') {
                 showModalFeedback('Order placement is disabled. GitHub token not configured correctly.', 'error');
                 return;
            }

            // Basic Validation (can be expanded)
            const requiredFields = ['customerName', 'customerPhone', 'deliveryAddress', 'deliveryCity', 'deliveryPincode', 'deliveryState'];
            let isValid = true;
            requiredFields.forEach(fieldName => {
                const field = orderForm.elements[fieldName];
                if (!field.value.trim()) {
                     field.style.borderColor = 'red'; // Highlight empty required fields
                     isValid = false;
                 } else {
                     field.style.borderColor = ''; // Reset border color
                 }
             });

             if (!isValid) {
                 showModalFeedback('Please fill in all required fields.', 'error');
                 return;
             }


            // Show loading state
            submitOrderBtn.disabled = true;
            submitOrderBtn.classList.add('loading');
            modalFeedback.style.display = 'none'; // Hide previous feedback

            const formData = new FormData(orderForm);
            const orderData = {
                orderId: Date.now(), // Simple unique ID using timestamp
                orderTimestamp: new Date().toISOString(),
                customerInfo: {
                    name: formData.get('customerName'),
                    phone: formData.get('customerPhone'),
                    email: formData.get('customerEmail') || null // Handle optional email
                },
                deliveryInfo: {
                    address: formData.get('deliveryAddress'),
                    city: formData.get('deliveryCity'),
                    pincode: formData.get('deliveryPincode'),
                    state: formData.get('deliveryState')
                },
                productInfo: {
                    id: formData.get('productId'),
                    name: formData.get('productName'),
                    price: formData.get('productPrice'), // Might be string 'Quote'
                    imageUrl: formData.get('productImageUrl')
                },
                status: "Pending" // Initial order status
            };

            try {
                await updateGitHubFile(orderData);
                showModalFeedback('Order placed successfully!', 'success');
                orderForm.reset(); // Clear form on success
                // Optionally close modal after a delay
                setTimeout(closeOrderModal, 2500);
            } catch (error) {
                console.error("Error submitting order:", error);
                showModalFeedback(`Error: ${error.message || 'Could not place order. Check console.'}`, 'error');
            } finally {
                // Hide loading state
                submitOrderBtn.disabled = false;
                submitOrderBtn.classList.remove('loading');
            }
        }

        function showModalFeedback(message, type = 'error') {
            modalFeedback.textContent = message;
            modalFeedback.className = `modal-feedback ${type}`; // Set class for styling
            modalFeedback.style.display = 'block';
        }

        // --- GitHub API Interaction (Client-Side - Insecure) ---
        async function updateGitHubFile(newOrderData) {
            if (!GITHUB_CONFIG.token) {
                throw new Error("GitHub token is missing or invalid.");
            }
            const apiUrl = `https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${GITHUB_CONFIG.filePath}`;
            const headers = {
                'Authorization': `token ${GITHUB_CONFIG.token}`,
                'Accept': 'application/vnd.github.v3+json'
            };

            let currentOrders = [];
            let currentFileSha = null;

            // 1. Get current file content and SHA
            try {
                const response = await fetch(apiUrl, { headers: headers });
                if (response.ok) {
                    const data = await response.json();
                    currentFileSha = data.sha;
                    // Decode Base64 content
                    const decodedContent = atob(data.content);
                    try {
                        currentOrders = JSON.parse(decodedContent);
                        if (!Array.isArray(currentOrders)) {
                             console.warn("Existing orderdata.json content is not an array. Will overwrite.");
                             currentOrders = []; // Reset if not an array
                        }
                    } catch (parseError) {
                         console.error("Error parsing existing orderdata.json. Will overwrite.", parseError);
                         currentOrders = []; // Reset if parsing fails
                    }
                } else if (response.status === 404) {
                    // File doesn't exist yet, will create it
                    console.log("orderdata.json not found. Creating new file.");
                    currentOrders = [];
                    currentFileSha = null; // No SHA for new file creation
                } else {
                    throw new Error(`GitHub API Error (Get File): ${response.status} ${response.statusText}`);
                }
            } catch (error) {
                 console.error("Error fetching current orders:", error);
                 throw new Error("Could not retrieve existing order data from GitHub.");
             }


            // 2. Add new order and prepare updated content
            currentOrders.push(newOrderData);
            const updatedContent = JSON.stringify(currentOrders, null, 2); // Pretty print JSON
            const encodedContent = btoa(updatedContent); // Encode to Base64

            // 3. Update (or create) the file on GitHub
            const commitMessage = `Add order ${newOrderData.orderId} via web form`;
            const body = {
                message: commitMessage,
                content: encodedContent,
                sha: currentFileSha // Include SHA if updating an existing file
            };
            // If it's a new file, don't include the sha field
            if (!currentFileSha) {
                delete body.sha;
            }

            try {
                const updateResponse = await fetch(apiUrl, {
                    method: 'PUT',
                    headers: {
                        ...headers,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(body)
                });

                if (!updateResponse.ok) {
                    const errorData = await updateResponse.json();
                    console.error("GitHub API Update Error Response:", errorData);
                    throw new Error(`GitHub API Error (Update File): ${updateResponse.status} ${updateResponse.statusText} - ${errorData.message || ''}`);
                }

                console.log("Order successfully saved to GitHub:", await updateResponse.json());
                return true; // Indicate success

            } catch (error) {
                 console.error("Error updating GitHub file:", error);
                 throw new Error("Could not save order data to GitHub.");
             }
        }

        // --- Intersection Observer ---
        function setupIntersectionObserver() { /* ... (no changes) ... */
              if (intersectionObserver) intersectionObserver.disconnect();

              const productItems = document.querySelectorAll('.product-item:not(.is-visible)');
              if (productItems.length === 0) return;

              intersectionObserver = new IntersectionObserver((entries, obs) => {
                  entries.forEach(entry => {
                      if (entry.isIntersecting) {
                          entry.target.classList.add('is-visible');
                          obs.unobserve(entry.target);
                      }
                  });
              }, { rootMargin: "0px 0px -10% 0px" });

              productItems.forEach(item => { intersectionObserver.observe(item); });
        }


        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
             fetchProducts();

             // Existing Listeners
             footerSearchTrigger.addEventListener('click', (e) => { e.preventDefault(); openSearchOverlay(); });
             closeSearchBtn.addEventListener('click', closeSearchOverlay);
             searchOverlay.addEventListener('click', (e) => { if (e.target === searchOverlay) { closeSearchOverlay(); } });
             document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && searchOverlay.classList.contains('visible')) { closeSearchOverlay(); } });
             searchOverlayInput.addEventListener('input', debounce(() => { displayProducts(getActiveCategory(), searchOverlayInput.value.trim()); }, DEBOUNCE_DELAY));
             leftArrow.addEventListener('click', () => scrollCategories('left'));
             rightArrow.addEventListener('click', () => scrollCategories('right'));
             window.addEventListener('resize', handleResize);
             window.addEventListener('popstate', (event) => { handleInitialCategory(); });

             // Order Modal Listeners
             modalCloseBtn.addEventListener('click', closeOrderModal);
             orderModal.addEventListener('click', (e) => { // Close if click is on overlay itself
                 if (e.target === orderModal) {
                     closeOrderModal();
                 }
             });
             orderForm.addEventListener('submit', handleOrderSubmit);

             // --- Update Footer Text (Kept as per original code structure) ---
             document.querySelectorAll('.footer-links a span').forEach(span => span.remove());
             document.querySelectorAll('.footer-links a').forEach(a => {
                 const iconClassList = a.querySelector('i').classList;
                 let text = 'Account';
                 if (a.classList.contains('active')) { text = 'Home'; }
                 else if (iconClassList.contains('fa-search')) { text = 'Search'; }
                 else if (iconClassList.contains('fa-store')) { text = 'Shop'; }
                 const span = document.createElement('span'); span.textContent = text; a.appendChild(span);
            });
        });

    </script>
</body>
</html>